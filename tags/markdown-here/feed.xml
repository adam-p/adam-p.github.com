<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Markdown Here on adam-p</title><link>https://adam-p.ca/tags/markdown-here/</link><description>Recent content in Markdown Here on adam-p</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 14 Jul 2016 00:00:00 +0000</lastBuildDate><atom:link href="https://adam-p.ca/tags/markdown-here/feed.xml" rel="self" type="application/rss+xml"/><item><title>Markdown Here: Splitting the Firefox and Thunderbird Extension</title><link>https://adam-p.ca/blog/2016/07/mdh-dividing-firefox-and-thunderbird/</link><pubDate>Thu, 14 Jul 2016 00:00:00 +0000</pubDate><guid>https://adam-p.ca/blog/2016/07/mdh-dividing-firefox-and-thunderbird/</guid><description>&lt;p>[This started as notes to myself to help clarify the problem and solution. It&amp;rsquo;s probably more suited to a Github issue than a blog post, and it may get copied into one.]&lt;/p>
&lt;h1 id="the-story-so-far">
&lt;a class="heading-anchor" href="#the-story-so-far">
#
&lt;/a>
The story so far
&lt;/h1>
&lt;p>The Firefox and Thunderbird versions of &lt;a href="https://markdown-here.com/">Markdown Here&lt;/a> both used nearly the same code &amp;ndash; an old-style XUL extension. Tb is only capable of using a XUL extension, while Fx supports at least three extension types: &lt;a href="https://developer.mozilla.org/en-US/Add-ons/Overlay_Extensions/XUL_School">XUL-based&lt;/a>, &lt;a href="https://developer.mozilla.org/en-US/Add-ons/SDK">Add-on SDK&lt;/a> (aka Jetpack, aka jpm), and &lt;a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions">WebExtensions&lt;/a>. WebExtensions is the newest, and is essentially an implementation of Chrome&amp;rsquo;s extension API.&lt;/p>
&lt;p>I&amp;rsquo;ve kept my eye on WebExtensions because it&amp;rsquo;s tempting to be able to use identical code across the many major browsers: Chrome, Firefox, Opera, and Edge(?). It seemed premature to do any real work towards using it as it&amp;rsquo;s not yet fully released, and there would be no perceived benefit to users (it&amp;rsquo;s a more-locked-down extension API, so there would be an imperceptible sercurity benefit).&lt;/p>
&lt;p>But&amp;hellip; Firefox&amp;rsquo;s multi-process &lt;a href="https://wiki.mozilla.org/Electrolysis">Electrolysis&lt;/a> (E10s) update is nearing release, and &lt;a href="https://github.com/adam-p/markdown-here/issues/207">it breaks MDH&lt;/a>. There are two ways to go about fixing this:&lt;/p>
&lt;ol>
&lt;li>Figure out what&amp;rsquo;s wrong in the XUL extension and correct it.&lt;/li>
&lt;li>Switch to WebExtensions.&lt;/li>
&lt;/ol>
&lt;p>I tried to figure out why E10s is breaking the XUL extension, but without any success. Maybe I could figure it out if I tried longer/harder? Or maybe not.&lt;/p>
&lt;p>I did some testing (and fixing) to make WebExtensions work, and it seems like the best option.&lt;/p>
&lt;h1 id="the-big-problem-splitting-up-fx-and-tb">
&lt;a class="heading-anchor" href="#the-big-problem-splitting-up-fx-and-tb">
#
&lt;/a>
The big problem: Splitting up Fx and Tb
&lt;/h1>
&lt;p>Until now, the Firefox and Thunderbird extensions were literally the same extension &amp;ndash; I upload a single file to Mozilla and check off the &amp;ldquo;Firefox&amp;rdquo; and &amp;ldquo;Thunderbird&amp;rdquo; boxes. There is only one extension ID for both. But Thunderbird only supports XUL extensions, so it&amp;rsquo;ll probably be using the XUL version forever.&lt;/p>
&lt;p>We clearly have a problem: Fx and Tb will have to use fundamentally different extensions, but right now there&amp;rsquo;s only one extension for both. We&amp;rsquo;re going to have to split the userbase. And it&amp;rsquo;s going to be ugly.&lt;/p>
&lt;p>Specifically, it&amp;rsquo;s going to be very ugly for either the Firefox users &lt;em>or&lt;/em> the Thunderbird users. One platform will receive a message saying, &amp;ldquo;If you want Markdown Here to keep working for you, uninstall the one you have and go install this other one.&amp;rdquo; (The other platform will see no difference.) Ugh. That&amp;rsquo;s going to cost us some users for sure.&lt;/p>
&lt;p>According to the &lt;a href="https://addons.mozilla.org/en-US/firefox/addon/markdown-here/statistics/usage/applications/?last=30">Mozilla stats for MDH&lt;/a>, there are two-thirds as many Thunderbird daily users of MDH as Firefox daily users. That makes it somewhat preferable to make life difficult for Tb users rather than Fx users.&lt;/p>
&lt;p>However, I think it&amp;rsquo;s Firefox users who will have to jump through hoops. The XUL extension will still work in Firefox to a sufficient degree to show a message to the user. The WebExtensions extension will not work at all in Thunderbird. So existing Thunderbird users simply cannot be given the WebExtensions version, therefore the WebExtensions version must be the new, separate extension. Therefore it&amp;rsquo;s the Firefox users who must suffer.&lt;/p>
&lt;p>(A couple of caveats: 1. I have asked in the &lt;a href="https://discourse.mozilla-community.org/t/best-way-to-split-thunderbird-and-firefox-users-because-webextensions/9717">Mozilla extension dev forum&lt;/a> for suggestions for how to do this gracefully; so for I&amp;rsquo;ve received one reply, but it&amp;rsquo;s even more painful. 2. I have a terrible feeling that there actually is a graceful way to do this and I&amp;rsquo;m just not seeing it.)&lt;/p>
&lt;h1 id="the-plan-such-as-it-is">
&lt;a class="heading-anchor" href="#the-plan-such-as-it-is">
#
&lt;/a>
The plan, such as it is
&lt;/h1>
&lt;ol>
&lt;li>
&lt;p>Get the WebExtensions work done. (Most of the effort now is going to be building the separate versions in a sane way.)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Release the brand new WebExtensions version, with a separate ID. (And update the website to point to it, etc.)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Release a new XUL version that does nothing but show Firefox users a message telling them what they need to do to upgrade. (And explaining and apologizing profusely.)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Watch how many users are lost.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>The E10s rollout is supposed to be gradual, so I plan on continuing to support Firefox in the XUL version for the time being, and continuing to show the switch-message when Firefox is detected.&lt;/p>
&lt;p>&lt;strong>Outstanding question:&lt;/strong> Continue using Addons.Mozilla.Org (aka AMO, aka the main Firefox extension site) or self-host. I&amp;rsquo;ve gone through &lt;a href="https://github.com/adam-p/markdown-here/issues/21">ridiculous hassle&lt;/a> getting MDH approved in the past, and I don&amp;rsquo;t want to do it again. Ever. (This is exacerbated by the fact that I&amp;rsquo;m planning on replacing the Markdown rendering library, and I fear push-back from the AMO reviewers for using a lot of third-party code that&amp;rsquo;s not pre-approved.) The downside of self-hosting is that MDH won&amp;rsquo;t show up in AMO searches, which is surely where a lot of users go when looking for a Firefox extension (versus googling).&lt;/p>
&lt;p>(The current Firefox and Thunderbird extension is also used by Pale Moon, which is a Firefox fork, and Postbox and Ice Dove, which are Thunderbird forks. There aren&amp;rsquo;t enough users of them to change any of the rationale, and it &lt;a href="https://forum.palemoon.org/viewtopic.php?t=6660">looks like&lt;/a> Pale Moon &lt;a href="https://forum.palemoon.org/viewtopic.php?t=12216">won&amp;rsquo;t be using&lt;/a> E10s. So there&amp;rsquo;s Firefox, and then everything else.)&lt;/p></description></item><item><title>Why and How to Use a Contributor License Agreement</title><link>https://adam-p.ca/blog/2015/02/contributor-license-agreement/</link><pubDate>Tue, 17 Feb 2015 00:00:00 +0000</pubDate><guid>https://adam-p.ca/blog/2015/02/contributor-license-agreement/</guid><description>
&lt;h2 id="background-and-motivation">
&lt;a class="heading-anchor" href="#background-and-motivation">
##
&lt;/a>
Background and Motivation
&lt;/h2>
&lt;p>I received a &lt;a href="https://github.com/adam-p/markdown-here/pull/232">pull request&lt;/a> for Markdown Here that was great: it found a bug, fixed it, and included tests for the fix. However, the PR submitter didn&amp;rsquo;t write the tests using the existing framework, so I figured I&amp;rsquo;d massage his test code into the proper form.&lt;/p>
&lt;p>And then I noticed that he included a &lt;a href="https://github.com/adam-p/markdown-here/commit/52cd013413ff4645ed124cef68b5fc9044d65a96#diff-555e8e637d661924e36cdddfba81a23aR9">copyright line&lt;/a> in the test file. It says &amp;ldquo;MIT License&amp;rdquo;, which is the license used for the rest of the project, but that got me thinking about what that might mean&amp;hellip;&lt;/p>
&lt;p>Wikipedia suggests that the &lt;a href="https://en.wikipedia.org/wiki/MIT_License">MIT License&lt;/a> would require me to include his copyright+license notice wherever I use his code. Not a big deal, but annoying. And maybe a slippery slope &amp;ndash; what if I get a bunch more code submissions?&lt;/p>
&lt;p>So I did some research into &amp;ldquo;Contributor License Agreements&amp;rdquo; and found that there are a couple more things to be concerned about:&lt;/p>
&lt;p>If you ever want to change the project license, you have to get the agreement of all contributors. That includes dual-licensing. Good info about that (and CLAs in general), with specific KDE example: &lt;a href="https://julien.ponge.org/blog/in-defense-of-contributor-license-agreements/">&amp;ldquo;In Defense of License Agreements&amp;rdquo;&lt;/a>.&lt;/p>
&lt;p>Patent something something. Contributors retain the patent rights unless explicitly granted in the CLA.&lt;/p>
&lt;p>And just to be clear: Contributors have the copyright on their code &lt;em>by default&lt;/em>, regardless of whether they put the © notice on it. I&amp;rsquo;m not sure about the license.&lt;/p>
&lt;p>So I decided to require MDH contributors to &amp;ldquo;sign&amp;rdquo; a CLA. Seemed kind of irresponsible not to.&lt;/p>
&lt;h2 id="picking-a-cla">
&lt;a class="heading-anchor" href="#picking-a-cla">
##
&lt;/a>
Picking a CLA
&lt;/h2>
&lt;p>Spending your weekend reading CLAs is a drag.&lt;/p>
&lt;p>I decided to use &lt;a href="http://www.harmonyagreements.org/">Harmony Agreements&lt;/a> to &lt;a href="http://selector.harmonyagreements.org/">generate&lt;/a> the agreement. (I chose &amp;ldquo;any license&amp;rdquo; for the &amp;ldquo;outbound license option&amp;rdquo;.) The agreement it provides seems pretty good and pretty standard.&lt;/p>
&lt;p>(Well&amp;hellip; when I first generated a agreement I chose the &amp;ldquo;copyright assignment&amp;rdquo; version instead of &amp;ldquo;copyright license&amp;rdquo;. I even committed it and got the pull-request submitter to sign it. But then I re-read it and realized it was a) not very standard, b) maybe not enforceable, and c) kind of heinous. So I changed to the &amp;ldquo;copyright license&amp;rdquo; form. The difference is something like &amp;ldquo;you&amp;rsquo;re transferring absolute power to me and you lose the ability to use your own code&amp;rdquo; versus &amp;ldquo;you&amp;rsquo;re letting me do whatever I want with your code but it&amp;rsquo;s still yours&amp;rdquo; &amp;ndash; exclusive vs. non-exclusive license, kind of thing.)&lt;/p>
&lt;h2 id="signing">
&lt;a class="heading-anchor" href="#signing">
##
&lt;/a>
&amp;ldquo;Signing&amp;rdquo;
&lt;/h2>
&lt;p>Ugh.&lt;/p>
&lt;p>Some projects &amp;ndash; like Apache &amp;ndash; require you to print out the agreement, sign it, and mail, fax, or scan-and-email it back to them. Another one (I forget which) uses some Adobe e-signing plugin where you draw your signature on the screen. Google requires you to be signed in, but it&amp;rsquo;s just a button press; ditto Twitter (signed in with Twitter, I mean). &lt;a href="https://www.clahub.com/">CLAHub&lt;/a> requires a Github sign-in (with optional typing of &amp;ldquo;I AGREE&amp;rdquo;). I think I also saw some projects that just require a filled-in form.&lt;/p>
&lt;p>CLAHub is really cool. It gives you a nice link for your CLA, collects agreements, and runs a bot that watches your project&amp;rsquo;s PRs, checks against the CLAs, and comments on the PR as to whether the PR-user has agreed yet or not. Except&amp;hellip; there&amp;rsquo;s a notice saying it&amp;rsquo;s not ready for prime-time, the bot is broken, and the blog hasn&amp;rsquo;t been updated in a year. Also, entrusting a (flaky?) third party with the agreements seems dangerous (although they can be downloaded, so blah).&lt;/p>
&lt;p>The article I linked above mentions &amp;ldquo;some [projects] collect agreements through a simple web form (Google Doc is a fine choice)&amp;rdquo;. So I created a Google Form with the CLA and a form for the contributor to provide contact info and indicate agreement. But&amp;hellip;&lt;/p>
&lt;p>Then I started thinking about non-repudiability. So I did a little reading about &lt;a href="https://en.wikipedia.org/wiki/Electronic_signature">electronic signatures&lt;/a> (not to be confused with digital signatures). Which is a horrible rabbit hole. Anyway, it made me seriously doubt that a row in a Google Spreadsheet with someone&amp;rsquo;s maybe-correct address and the words &amp;ldquo;I AGREE&amp;rdquo; really constitutes a legal signature. (Even in the Google and Twitter cases &amp;ndash; how would they prove that they didn&amp;rsquo;t just fiddle some bits to make it look like I signed?)&lt;/p>
&lt;p>And if you&amp;rsquo;re going to do this annoying CLA crap then you might as well hope that it means something, right?&lt;/p>
&lt;p>Then I found &lt;a href="https://github.com/Medium/opensource/blob/master/sign-cla.md">Medium&amp;rsquo;s open source project&lt;/a>. It requires contributors to commit a file along with their pull request stating that they agree to the CLA. That seemed&amp;hellip; totally reasonable. The agreement is in-band with the code. In a way that I can&amp;rsquo;t manipulate without invalidating. And much, much less annoying for the contributor than printing/signing/faxing.&lt;/p>
&lt;p>So that&amp;rsquo;s how I did it. See MDH&amp;rsquo;s &lt;a href="https://github.com/adam-p/markdown-here/blob/master/CONTRIBUTING.md#contributor-license-agreement">CONTRIBUTING.md&lt;/a>. (That&amp;rsquo;s the &lt;a href="https://github.com/blog/1184-contributing-guidelines">filename to use&lt;/a>.)&lt;/p>
&lt;h2 id="backlash-warning">
&lt;a class="heading-anchor" href="#backlash-warning">
##
&lt;/a>
Backlash warning
&lt;/h2>
&lt;p>Doing the CLA read-and-agree dance is more effort than not doing it. And some people are offended at the idea of doing it (see the tweet at the top of the &amp;ldquo;In Defense Of&amp;rdquo; post.) So, it seems unavoidable that a project with a CLA will get fewer contributions than one without &amp;ndash; some people just won&amp;rsquo;t get past that hurdle.&lt;/p>
&lt;p>But it still seems necessary.&lt;/p>
&lt;hr>
&lt;p>[Note: This is actually an email I wrote to my co-workers after going through this CLA exercise with Markdown Here. That&amp;rsquo;s why the tone is a bit informal and &amp;ldquo;blah&amp;rdquo; is used as if it means something.]&lt;/p></description></item><item><title>Safari Extensions Gallery: half-baked</title><link>https://adam-p.ca/blog/2013/06/safari-extensions-gallery-half-baked/</link><pubDate>Tue, 25 Jun 2013 00:00:00 +0000</pubDate><guid>https://adam-p.ca/blog/2013/06/safari-extensions-gallery-half-baked/</guid><description>&lt;p>Trying to get &lt;a href="https://markdown-here.com">Markdown Here&lt;/a> listed in the &lt;a href="https://extensions.apple.com">Safari Extensions Gallery&lt;/a> is by far the worst browser extension &amp;ldquo;store&amp;rdquo; experience I&amp;rsquo;ve had so far. Shockingly bad.&lt;/p>
&lt;h2 id="no-hosting">
&lt;a class="heading-anchor" href="#no-hosting">
##
&lt;/a>
No hosting
&lt;/h2>
&lt;p>First of all, but least of all: There&amp;rsquo;s no hosting. Unlike the Chrome and Mozilla stores, the Safari store doesn&amp;rsquo;t host the extension for you &amp;ndash; it&amp;rsquo;s really more of a listing of links to wherever you host your extension files. That&amp;rsquo;s not terrible, but:&lt;/p>
&lt;ul>
&lt;li>It&amp;rsquo;s costing me a little bit of money each month to host them.&lt;/li>
&lt;li>I don&amp;rsquo;t get nice install/usage stats like I do with Chrome and &lt;a href="https://addons.mozilla.org/en-US/firefox/addon/markdown-here/statistics/?last=365">Mozilla&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="no-communication">
&lt;a class="heading-anchor" href="#no-communication">
##
&lt;/a>
No communication
&lt;/h2>
&lt;p>Submitting the extension was basically the same as everywhere else. But this is the confirmation email:&lt;/p>
&lt;blockquote>
&lt;p>Dear Adam Pritchard,
Thank you for submitting your Safari Extension.
Apple reviews all submissions and reserves the right to omit, edit, or reject any submission. Please note you will not receive any further notifications.
We appreciate your interest in Safari.
Sincerely,
Apple Developer&lt;/p>
&lt;/blockquote>
&lt;p>(From &lt;a href="mailto:noreply@adc.apple.com">noreply@adc.apple.com&lt;/a>)&lt;/p>
&lt;p>So&amp;hellip; You&amp;rsquo;re going to review my extension, and I&amp;rsquo;ll never know if it&amp;rsquo;s been accepted or rejected or what? And there&amp;rsquo;s no mechanism for me to get an update?&lt;/p>
&lt;p>Sure enough, 5 weeks has gone by now. There&amp;rsquo;ve been no status update emails, and there&amp;rsquo;s no review status info anywhere on the developer website (that I can find). And I&amp;rsquo;m not the only one &amp;ndash; there are &lt;a href="https://devforums.apple.com/thread/182373?tstart=0">other people&lt;/a> on the forums in the &lt;a href="https://devforums.apple.com/thread/187144?tstart=0">same boat&lt;/a>.&lt;/p>
&lt;p>To be clear, this is not at all what the Chrome and Mozilla extension approval process is like. I&amp;rsquo;ve had my &lt;a href="https://github.com/adam-p/markdown-here/issues/21">fair share of problems&lt;/a> with the Mozilla approval process, but I had a queue number, an IRC channel, and reviewers I could communicate with. (The Chrome store has no apparent approval process, because I&amp;rsquo;m using the standard API. Which is similar to the Safari extension API I&amp;rsquo;m using. So&amp;hellip; why is there any non-negligible review at all?)&lt;/p>
&lt;h2 id="no-search">
&lt;a class="heading-anchor" href="#no-search">
##
&lt;/a>
No search
&lt;/h2>
&lt;p>To top it off, the Safari Extensions Gallery itself&amp;hellip; has no search?!? Let&amp;rsquo;s pick a not-front-page extension at random&amp;hellip; how about the &amp;ldquo;Entertainment&amp;rdquo; category and then the Turboglue extension. (Sorry, there&amp;rsquo;s no way to give you a link to that!). Now try to find it some other way. The search box in the upper-right of that page? &amp;ldquo;No results were found.&amp;rdquo; And&amp;hellip; I can&amp;rsquo;t find another search box. (Unlike Firefox, there&amp;rsquo;s no in-browser extension search.) How about a Google site search? That wouldn&amp;rsquo;t really be an acceptable work-around even if it worked&amp;hellip; but &lt;a href="https://www.google.com/search?q=site%3Aextensions.apple.com+Turboglue">it doesn&amp;rsquo;t anwyay&lt;/a>.&lt;/p>
&lt;p>(Maybe related: Here&amp;rsquo;s a &lt;a href="https://devforums.apple.com/thread/179972">forum post&lt;/a> by a dev who has had his/her extension approved, but can&amp;rsquo;t actually find it in the Gallery.)&lt;/p>
&lt;p>I&amp;rsquo;m not sure how this could be worse. Unfriendly to developers &lt;em>and&lt;/em> unfriendly to users. And it&amp;rsquo;s not like Safari extensions are &lt;em>new&lt;/em> &amp;ndash; they&amp;rsquo;ve been around about the &lt;a href="https://en.wikipedia.org/wiki/Safari_%28web_browser%29#Safari_5">same amount of time&lt;/a> &lt;a href="https://en.wikipedia.org/wiki/Google_Chrome#Chrome_Web_Store">as Chrome extensions&lt;/a>.&lt;/p>
&lt;p>&lt;img src="../../img/blog/safari-gallery-new.png" alt="Safari Extensions Gallery still marked as new" title="Safari Extensions Gallery still marked as new">&lt;/p>
&lt;p>(Screen-grabbed from the bottom of &lt;a href="https://developer.apple.com/programs/safari/">this page&lt;/a>. Age of the Gallery derived from &lt;a href="https://lifehacker.com/5598524/whats-useful-in-the-safari-extensions-gallery">this article&lt;/a>.)&lt;/p>
&lt;h2 id="sweet-lemons">
&lt;a class="heading-anchor" href="#sweet-lemons">
##
&lt;/a>
Sweet lemons
&lt;/h2>
&lt;p>Safari extensions are clearly not Apple&amp;rsquo;s primary concern, and maybe that&amp;rsquo;s okay. It&amp;rsquo;s not a hardcore-extension-geek browser like Firefox; their browser isn&amp;rsquo;t also an OS, unlike Chrome; and they have guaranteed, bundled-with-OS market share, like Internet Explorer (I don&amp;rsquo;t know much about IE&amp;rsquo;s extension support, but it&amp;rsquo;s clearly not as robust as Firefox and Chrome). And they do give me a way to provide a &lt;a href="https://markdown-here.com/get.html">Safari extension to my users&lt;/a> and update it automatically.&lt;/p>
&lt;hr>
&lt;h2 id="bonus-whinging">
&lt;a class="heading-anchor" href="#bonus-whinging">
##
&lt;/a>
Bonus whinging
&lt;/h2>
&lt;p>It&amp;rsquo;s necessary to generate and register a signing certificate before you can even start to develop a Safari extension (IIRC &amp;ndash; but definitely before publishing). There&amp;rsquo;s no such stumbling block in Firefox and Chrome. Maybe this is due to the absence of hosting? I&amp;rsquo;m not entirely sure how painful it&amp;rsquo;s going to be to set up a new OS X development machine.&lt;/p>
&lt;p>Check out the ghetto method of opening the Markdown Here options page in Safari. It&amp;rsquo;s probably not &lt;em>just&lt;/em> my dumbness, since I stole the approach from AdBlock.&lt;/p>
&lt;p>&lt;img src="../../img/blog/safari-mdh-prefs-checkbox.png" alt="Markdown Here prefs in Safari">&lt;/p>
&lt;hr>
&lt;h2 id="update-accepted-6-months-later">
&lt;a class="heading-anchor" href="#update-accepted-6-months-later">
##
&lt;/a>
Update: Accepted 6 months later
&lt;/h2>
&lt;p>Two days ago (2013-11-04) I received an email indicating that Markdown Here had been accepted into the Safari Extensions Gallery. Phew!&lt;/p>
&lt;p>I think the acceptance makes the whole thing even weirder. If they were just sending submissions directly to the trash I could understand, but&amp;hellip; Complete silence and then acceptance after 6 months? Are they backed up half a year? Is my extension so complex that it took them that long to review? Wha?&lt;/p></description></item><item><title>No One Knows to Click on a Page Action</title><link>https://adam-p.ca/blog/2013/03/pageaction-interaction/</link><pubDate>Sun, 24 Mar 2013 00:00:00 +0000</pubDate><guid>https://adam-p.ca/blog/2013/03/pageaction-interaction/</guid><description>&lt;p>&lt;strong>Page actions&lt;/strong> &amp;ndash; the buttons in a browser&amp;rsquo;s address bar &amp;ndash; are a &lt;strong>surprising UI failure&lt;/strong>.&lt;/p>
&lt;p>When adding a button for a browser extension, a choice must be made whether to make it a &amp;ldquo;page action&amp;rdquo; or a &amp;ldquo;browser action&amp;rdquo; (button on the toolbar). But &lt;strong>browsers have failed to communicate the interactiveness&lt;/strong> of page actions, and &lt;strong>almost no one &amp;ndash; techy or layman &amp;ndash; realizes that they&amp;rsquo;re clickable&lt;/strong>.&lt;/p>
&lt;hr>
&lt;p>To complement the context menu item and hotkey, and to fulfil &lt;a href="https://github.com/adam-p/markdown-here/issues/34">a user feature request&lt;/a>, I decided to add a button to the &lt;a href="https://www.markdown-here.com">&lt;strong>Markdown Here&lt;/strong>&lt;/a> browser extension. It turned out that simply deciding &lt;em>where&lt;/em> to put the button was a big part of the effort&amp;hellip;&lt;/p>
&lt;h2 id="page-action-vs-browser-action">
&lt;a class="heading-anchor" href="#page-action-vs-browser-action">
##
&lt;/a>
Page Action vs. Browser Action
&lt;/h2>
&lt;p>I&amp;rsquo;m going to use the Chrome extension development terminology:&lt;/p>
&lt;dl>
&lt;dt>Page actions...&lt;/dt>
&lt;dd>are the buttons and status indicators located in the address/omni/awesome bar. (&lt;a href="https://developer.chrome.com/extensions/pageAction.html">See &lt;code>pageAction&lt;/code> API info&lt;/a>.)&lt;/dd>
&lt;dt>Browser actions...&lt;/dt>
&lt;dd>are buttons on the browser toolbar. (&lt;a href="https://developer.chrome.com/extensions/browserAction.html">See &lt;code>browserAction&lt;/code> API info&lt;/a>.)&lt;/dd>
&lt;/dl>
&lt;p>&lt;img src="../../img/blog/firefox-button.png" alt="Firefox page and browser buttons">&lt;/p>
&lt;p>In the screenshot above you can see the two styles co-existing in Firefox, which suggests there&amp;rsquo;s no real implementation decision to make &amp;ndash; just provide both, and let the user decide which style they like. That&amp;rsquo;s true in Firefox (although there&amp;rsquo;s still the lesser decision of whether or not to add the toolbar button by default), but in Chrome you can either have a page action &lt;em>or&lt;/em> a browser action, not both.&lt;/p>
&lt;p>The choice initially seemed pretty obvious: use a page action. From Chrome&amp;rsquo;s &lt;a href="https://developer.chrome.com/extensions/browserAction.html#tips">documentation for browser actions&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Don&amp;rsquo;t use browser actions for features that make sense for only a few pages. Use page actions instead.&lt;/p>
&lt;/blockquote>
&lt;p>Markdown Here&amp;rsquo;s button is only applicable to some rich-edit compose elements (email, mostly), so that admonition seems to apply pretty directly. Like many people, I don&amp;rsquo;t like occasional-use buttons cluttering up my toolbar, so I initially implemented the button as a page action.&lt;/p>
&lt;h2 id="apparently-imperceptible-affordance">
&lt;a class="heading-anchor" href="#apparently-imperceptible-affordance">
##
&lt;/a>
Apparently Imperceptible Affordance
&lt;/h2>
&lt;p>&amp;hellip;And then I showed the cool new button to my significant other, who said something along the lines of &amp;ldquo;I can click that?&amp;rdquo; Which is a pretty damning statement, for a button.&lt;/p>
&lt;p>I must admit that I had some suspicions about the obviousness of page actions&amp;rsquo; clickability. I&amp;rsquo;m fairly sure it took me a while to realize I could click them, and I&amp;rsquo;m a) pretty technically savvy, and b) pretty hover-over-everything-that-looks-interesting curious. But what if a user is &lt;em>not&lt;/em> both of those things&amp;hellip;?&lt;/p>
&lt;p>So I asked around. I asked in the &lt;a href="https://groups.google.com/forum/#!topic/markdown-here/NjQRYcD1mgY/discussion">Markdown Here Google Group&lt;/a>, the &lt;a href="https://ux.stackexchange.com/questions/33987/browser-extensions-page-action-or-browser-action">UX StackExchange&lt;/a>, and on &lt;a href="https://plus.google.com/u/0/112228900913862544865/posts/9HbUjid2UvV">Google+&lt;/a>. These are the sorts of responses I got:&lt;/p>
&lt;ul>
&lt;li>&amp;ldquo;This [is] purely anecdotal, but I work in the web industry, and use [C]hrome everyday, and didn&amp;rsquo;t realise the page actions were clickable. I agree with you that they look more like signifiers than they do clickable buttons.&amp;rdquo;&lt;/li>
&lt;li>&amp;ldquo;But I agree that they don&amp;rsquo;t function well as buttons, perhaps this is by the design of the icon (not &amp;ldquo;raising&amp;rdquo; the element to give it depth).&amp;rdquo;&lt;/li>
&lt;li>&amp;ldquo;pageAction in the abstract is a great idea, but I always find its use a little jarring. And I agree it&amp;rsquo;s not button-like at all, more just informational.&amp;rdquo;&lt;/li>
&lt;/ul>
&lt;p>(Yes, there were some people who knew that page actions are clickable. But the fact that many computer/tech/web/UX-savvy people &lt;em>didn&amp;rsquo;t&lt;/em> know is the more significant observation.)&lt;/p>
&lt;p>I also asked around among people at the office (coders) and among non-programmer friends, and the vast majority of both groups didn&amp;rsquo;t know they could interact with page actions. At best they thought of them as status indicators, and at worst they couldn&amp;rsquo;t remember ever having noticed them before. &lt;em>Ugh&lt;/em>.&lt;/p>
&lt;h3 id="missing-cues">
&lt;a class="heading-anchor" href="#missing-cues">
###
&lt;/a>
Missing Cues
&lt;/h3>
&lt;p>It&amp;rsquo;s hard to blame users for this lack of &lt;a href="https://en.wikipedia.org/wiki/Affordance">affordance&lt;/a> recognition. At least, not yet.&lt;/p>
&lt;p>Page actions do not display any of the typical this-is-a-clickable-thing traits. For the most part, page actions:&lt;/p>
&lt;ul>
&lt;li>are not raised or underlined, like a standard button or a link, so most people won&amp;rsquo;t hover over them, but even if the user does hover, page actions&amp;hellip;&lt;/li>
&lt;li>do not change at all when hovered over &amp;ndash; no outline, no colour change, no raise-up, no clicky-hand mouse cursor.&lt;/li>
&lt;/ul>
&lt;p>Some page actions have a verb-based tooltip if you hover long enough. &lt;em>Some&lt;/em>. &lt;em>If&lt;/em>. &lt;em>Long enough&lt;/em>.&lt;/p>
&lt;p>It&amp;rsquo;s a little shocking how poorly the interactiveness is communicated to the user.&lt;/p>
&lt;h3 id="maybe-our-future-selves-will-get-it">
&lt;a class="heading-anchor" href="#maybe-our-future-selves-will-get-it">
###
&lt;/a>
Maybe our future selves will get it?
&lt;/h3>
&lt;!-- dropping into HTML to float the image, since it's so vertical -->
&lt;a href="../../img/blog/windows8-clickable.png">
&lt;img src="../../img/blog/windows8-clickable.png" alt="Windows 8 clickable text" class="pull-right" style="max-height: 20em; margin-left: 2em;">
&lt;/a>
&lt;p>Above I coyly dropped &amp;ldquo;At least, not yet.&amp;rdquo; There is a trend in UI design toward everything on-screen being interactive unless explicitly disabled-looking. Windows 8 has gone this way, as has Chrome and, to a slightly lesser extent, Firefox. There&amp;rsquo;s very, very little text or window chrome that&amp;rsquo;s non-interactive.&lt;/p>
&lt;p>But even if you accept the &amp;ldquo;everything is interactive&amp;rdquo; ideal, page actions are still different than most other elements, since there&amp;rsquo;s no hover effect. And page actions are further hampered by the minimalistic design aesthetic that Chrome and Firefox seem to have adopted for them &amp;ndash; a monochrome outline icon that can easily be read as disabled.&lt;/p>
&lt;p>Maybe once users have fully embraced/internalized the idea that there are no extraneous UI elements, they won&amp;rsquo;t need hover effects and raised borders. Maybe there&amp;rsquo;ll be a great awakening to the utility of page actions. But until then&amp;hellip;&lt;/p>
&lt;h2 id="how-to-rescue-page-actions">
&lt;a class="heading-anchor" href="#how-to-rescue-page-actions">
##
&lt;/a>
How to rescue page actions
&lt;/h2>
&lt;p>Page actions need to look less like small, monochrome, passive, static icons. They need some standard button cues, both initially and on hover; they should employ one or more of: raisèd-ness, colour, border, more visual strength.&lt;/p>
&lt;p>(I suspect that even the Chrome-style toolbar buttons &amp;ndash; like the three-line settings button &amp;ndash; are also below most laypeople&amp;rsquo;s threshold to recognize the click affordance. I&amp;rsquo;ve seen that in action in my own family-tech-support experience. Those buttons also lack most historical click cues. But let&amp;rsquo;s tilt at one windmill at a time&amp;hellip;)&lt;/p>
&lt;h3 id="tangent-chrome-needs-to-allow-both-page-and-browser-actions">
&lt;a class="heading-anchor" href="#tangent-chrome-needs-to-allow-both-page-and-browser-actions">
###
&lt;/a>
Tangent: Chrome needs to allow both page and browser actions
&lt;/h3>
&lt;p>Finally, Chrome should allow extensions to provide both page actions and browser actions.&lt;/p>
&lt;p>In the screenshot at the top of this post, you see can that &lt;a href="https://getpocket.com/">Pocket&amp;rsquo;s&lt;/a> Firefox extension uses both button styles: the page action is for saving the current page, while the browser action is for showing your saved pages. Similarly for the bookmarks buttons: page action for bookmarking the page, browser action for viewing bookmarks.&lt;/p>
&lt;p>(Markdown Here also has a button in each place, but it&amp;rsquo;s not as compelling a use case, since it&amp;rsquo;s just a convenience to work around the page action affordance opacity. Both buttons toggle Markdown rendering; the page action only shows when focus is in a valid target; you can hide the toolbar button if you&amp;rsquo;re one of the few page-action-savvy users. But, still, I wish I could provide the same flexibility to my Chrome users that I do to my Firefox users.)&lt;/p>
&lt;p>In Chrome, Pocket only has a browser action (which, oddly enough, acts only like its Firefox page action), and bookmarks only have a page action (and a whole toolbar). I can&amp;rsquo;t think of any reason for Chrome to prevent extensions from providing both, and there are certainly good use cases for allowing them.&lt;/p>
&lt;h2 id="so-its-back-to-a-browser-action">
&lt;a class="heading-anchor" href="#so-its-back-to-a-browser-action">
##
&lt;/a>
So it&amp;rsquo;s back to a browser action
&lt;/h2>
&lt;p>I finally switched the Markdown Here toggle button in Chrome to be a browser action. Even though it clearly, spiritually, should be a page action, I just can&amp;rsquo;t ignore the fact that most users will not recognize it as clickable in that form.&lt;/p>
&lt;p>I have had &lt;a href="https://github.com/adam-p/markdown-here/issues/45">one complaint&lt;/a> about the button location, but the user seemed satisfied that I made the rational choice after I explained it.&lt;/p>
&lt;hr>
&lt;a name="update-20171028"/>
&lt;h2 id="update-2017-10-28">
&lt;a class="heading-anchor" href="#update-2017-10-28">
##
&lt;/a>
Update 2017-10-28
&lt;/h2>
&lt;p>Last year &lt;strong>Chrome turned page actions into browser actions&lt;/strong>. The &lt;a href="https://productforums.google.com/d/msg/chrome/wOUFbsKqPg0/K9FBzJh7BAAJ">description of the change&lt;/a> suggests that this was a security decision. Evil stealth extensions were being installed, so now all extensions have to have toolbar buttons to expose them to users. (FWIW, I don&amp;rsquo;t think this is a good solution to the problem. I&amp;rsquo;m sure the majority of users don&amp;rsquo;t pay much attention to random toolbar buttons.) It makes little sense for page action-centric extensions to have both a sometimes-visible address bar button and an always-visible toolbar button, so the Chrome team did away with the address bar button.&lt;/p>
&lt;p>Firefox hasn&amp;rsquo;t made a similar change. You&amp;rsquo;d think that if there&amp;rsquo;s solid security rationale for one browser, that it&amp;rsquo;d apply to all browsers.&lt;/p>
&lt;p>This makes the documentation for &lt;code>pageAction&lt;/code> pretty confusing. Check out &lt;a href="https://developer.chrome.com/extensions/pageAction">Chrome&amp;rsquo;s&lt;/a> versus &lt;a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/pageAction">Mozilla&amp;rsquo;s&lt;/a> documentation. Chrome&amp;rsquo;s documentation is kind of incoherent now. There seems to be no reason at all to use page actions, but the doc still suggests that you do.&lt;/p>
&lt;p>I felt that page actions were kind of unusable before, but&amp;hellip; this is worse?&lt;/p>
&lt;p>The reason I was looking at this again is because I created another extension, called &lt;a href="https://github.com/adam-p/breached">Breached&lt;/a>, where a page action would, in theory, make the most sense. The button is enabled/shown when the user visits a site that has suffered a breach in the past, exposing user accounts. This is a pretty rare thing (for many people&amp;hellip; who don&amp;rsquo;t use Yahoo Mail), so dedicating a perma-visible toolbar button to it is pretty wasteful. Still, I initially went with a browser action for the reasons given in this post. I even added a notification (shown once per site), so the user could hide the toolbar button and still notice when they visit a breached site.&lt;/p>
&lt;p>Then a &lt;a href="https://addons.mozilla.org/en-US/firefox/addon/breached/reviews/940746/">reviewer&lt;/a> requested that it be a page action. I thought about it again and realized that the notification also helps with the &amp;ldquo;no one knows to click on a page action&amp;rdquo; problem by telling the user they can click on it. And the always-visible button still bugged me (and, let&amp;rsquo;s face it, most users won&amp;rsquo;t know how to hide buttons). So I changed it to a page action. And&amp;hellip; discovered that there&amp;rsquo;s no visible difference in Chrome. Except page actions don&amp;rsquo;t support badge text, which I was using to show the number of breaches.&lt;/p>
&lt;p>Anyway, I&amp;rsquo;m leaving Breached as a page action, for the sake of Firefox users.&lt;/p>
&lt;hr>
&lt;p>Postscript: First blog post ever! Yay! Thanks to &lt;a href="https://caseywatts.github.com/">Casey Watts&lt;/a> for suggesting that I write it.&lt;/p></description></item></channel></rss>